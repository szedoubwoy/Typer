{% extends 'base.html' %}

{% block title %}Results{% endblock %}

{% block content %}
<h2>Wyniki</h2>

<div class="card">
    <table class="results-table">
        <thead>
            <tr>
                <th>Gospodarze</th>
                <th>Wynik</th>
                <th>Goście</th>
                <th>Data</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for match in matches %}
            <tr>
                <td class="{% if match.final_score %}{% if match.actual_home_team_score > match.actual_away_team_score %}winner{% elif match.actual_home_team_score < match.actual_away_team_score %}loser{% else %}draw{% endif %}{% endif %}">
                    {{ match.home_team }}
                </td>
                <td>
                    {% if match.final_score %}
                        {{ match.actual_home_team_score }}
                    {% else %}
                        0
                    {% endif %} -
                    {% if match.final_score %}
                        {{ match.actual_away_team_score }}
                    {% else %}
                        0
                    {% endif %}
                </td>
                <td class="{% if match.final_score %}{% if match.actual_home_team_score < match.actual_away_team_score %}winner{% elif match.actual_home_team_score > match.actual_away_team_score %}loser{% else %}draw{% endif %}{% endif %}">
                    {{ match.away_team }}
                </td>
                <td>
                    <small>{{ match.date|date:"j F Y, H:i" }}</small>
                </td>
                <td>
                    {% if match.final_score %}
                        <span class="final"><i class="fa-solid fa-futbol"></i></span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if tournament_results %}
    <div class="final-results-section">
        <p>Zwycięzca Euro: <strong>{% if tournament_results.winner_team %} {{ tournament_results.winner_team.name }} {% else %} - {% endif %}</strong></p>
        <p>Król strzelców: <strong>{% if tournament_results.top_scorer %} {{ tournament_results.top_scorer.player }} {% else %} - {% endif %}</strong></p>
    </div>
{% else %}
    <p>No tournament results set by admin.</p>
{% endif %}
{% endblock %}
